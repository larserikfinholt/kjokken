(function () {
var requirejs,require,define;!function(e){function t(e,t){var n,i,r,o,a,s,u,c,l,f,p=t&&t.split("/"),d=g.map,h=d&&d["*"]||{};if(e&&"."===e.charAt(0)&&t){for(p=p.slice(0,p.length-1),e=p.concat(e.split("/")),c=0;c<e.length;c+=1)if(f=e[c],"."===f)e.splice(c,1),c-=1;else if(".."===f){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}if((p||h)&&d){for(n=e.split("/"),c=n.length;c>0;c-=1){if(i=n.slice(0,c).join("/"),p)for(l=p.length;l>0;l-=1)if(r=d[p.slice(0,l).join("/")],r&&(r=r[i])){o=r,a=c;break}if(o)break;!s&&h&&h[i]&&(s=h[i],u=c)}!o&&s&&(o=s,a=u),o&&(n.splice(0,a,o),e=n.join("/"))}return e}function n(t,n){return function(){return l.apply(e,v.call(arguments,0).concat([t,n]))}}function i(e){return function(n){return t(n,e)}}function r(e){return function(t){d[e]=t}}function o(t){if(h.hasOwnProperty(t)){var n=h[t];delete h[t],m[t]=!0,c.apply(e,n)}if(!d.hasOwnProperty(t)&&!m.hasOwnProperty(t))throw new Error("No "+t);return d[t]}function a(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function s(e,t,n){requirejs.onResourceLoad&&e&&requirejs.onResourceLoad({defined:t},{id:e},n)}function u(e){return function(){return g&&g.config&&g.config[e]||{}}}var c,l,f,p,d={},h={},g={},m={},v=[].slice;f=function(e,n){var r,s=a(e),u=s[0];return e=s[1],u&&(u=t(u,n),r=o(u)),u?e=r&&r.normalize?r.normalize(e,i(n)):t(e,n):(e=t(e,n),s=a(e),u=s[0],e=s[1],u&&(r=o(u))),{f:u?u+"!"+e:e,n:e,pr:u,p:r}},p={require:function(e){return n(e)},exports:function(e){var t=d[e];return"undefined"!=typeof t?t:d[e]={}},module:function(e){return{id:e,uri:"",exports:d[e],config:u(e)}}},c=function(t,i,a,u){var c,l,g,v,y,b,x=[];if(u=u||t,"function"==typeof a){for(i=!i.length&&a.length?["require","exports","module"]:i,y=0;y<i.length;y+=1)if(v=f(i[y],u),l=v.f,"require"===l)x[y]=p.require(t);else if("exports"===l)x[y]=p.exports(t),b=!0;else if("module"===l)c=x[y]=p.module(t);else if(d.hasOwnProperty(l)||h.hasOwnProperty(l)||m.hasOwnProperty(l))x[y]=o(l);else{if(!v.p)throw new Error(t+" missing "+l);v.p.load(v.n,n(u,!0),r(l),{}),x[y]=d[l]}g=a.apply(d[t],x),t&&(c&&c.exports!==e&&c.exports!==d[t]?d[t]=c.exports:g===e&&b||(d[t]=g))}else t&&(d[t]=a);s(t,d,x)},requirejs=require=l=function(t,n,i,r,a){return"string"==typeof t?p[t]?p[t](n):o(f(t,n).f):(t.splice||(g=t,n.splice?(t=n,n=i,i=null):t=e),n=n||function(){},"function"==typeof i&&(i=r,r=a),r?c(e,t,n,i):setTimeout(function(){c(e,t,n,i)},15),l)},l.config=function(e){return g=e,l},define=function(e,t,n){t.splice||(n=t,t=[]),h[e]=[e,t,n]},define.amd={jQuery:!0}}();
define("durandal/amd/almond-custom", function(){});

define('durandal/system',["require"],function(require){var t,e=!1,n=Object.keys,i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,r=!1;if(Function.prototype.bind&&("object"==typeof console||"function"==typeof console)&&"object"==typeof console.log)try{["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(t){console[t]=this.call(console[t],console)},Function.prototype.bind)}catch(a){r=!0}require.on&&require.on("moduleLoaded",function(module,e){t.setModuleId(module,e)}),"undefined"!=typeof requirejs&&(requirejs.onResourceLoad=function(e,n){t.setModuleId(e.defined[n.id],n.id)});var s=function(){},u=function(){try{if("undefined"!=typeof console&&"function"==typeof console.log)if(window.opera)for(var t=0;t<arguments.length;)console.log("Item "+(t+1)+": "+arguments[t]),t++;else 1==Array.prototype.slice.call(arguments).length&&"string"==typeof Array.prototype.slice.call(arguments)[0]?console.log(Array.prototype.slice.call(arguments).toString()):console.log(Array.prototype.slice.call(arguments));else Function.prototype.bind&&!r||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))}catch(e){}};return t={version:"1.2.0",noop:s,getModuleId:function(t){return t?"function"==typeof t?t.prototype.__moduleId__:"string"==typeof t?null:t.__moduleId__:null},setModuleId:function(t,e){return t?"function"==typeof t?(t.prototype.__moduleId__=e,void 0):("string"!=typeof t&&(t.__moduleId__=e),void 0):void 0},debug:function(t){return 1!=arguments.length?e:(e=t,e?(this.log=u,this.log("Debug mode enabled.")):(this.log("Debug mode disabled."),this.log=s),void 0)},isArray:function(t){return"[object Array]"===o.call(t)},log:s,defer:function(t){return $.Deferred(t)},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=0|16*Math.random(),n="x"==t?e:8|3&e;return n.toString(16)})},acquire:function(){var t=Array.prototype.slice.call(arguments,0);return this.defer(function(e){require(t,function(){var t=arguments;setTimeout(function(){e.resolve.apply(e,t)},1)})}).promise()}},t.keys=n||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)i.call(t,n)&&(e[e.length]=n);return e},t});
define('durandal/viewEngine',["./system"],function(e){var t;return t=$.parseHTML?function(e){return $.parseHTML(e)}:function(e){return $(e).get()},{viewExtension:".html",viewPlugin:"text",isViewUrl:function(e){return-1!==e.indexOf(this.viewExtension,e.length-this.viewExtension.length)},convertViewUrlToViewId:function(e){return e.substring(0,e.length-this.viewExtension.length)},convertViewIdToRequirePath:function(e){return this.viewPlugin+"!"+e+this.viewExtension},parseMarkup:function(e){var n=t(e);if(1==n.length)return n[0];for(var i=[],r=0;r<n.length;r++){var o=n[r];if(8!=o.nodeType){if(3==o.nodeType){var a=/\S/.test(o.nodeValue);if(!a)continue}i.push(o)}}return i.length>1?$(i).wrapAll('<div class="durandal-wrapper"></div>').parent().get(0):i[0]},createView:function(t){var n=this,i=this.convertViewIdToRequirePath(t);return e.defer(function(r){e.acquire(i).then(function(e){var i=n.parseMarkup(e);i.setAttribute("data-view",t),r.resolve(i)})}).promise()}}});
define('durandal/viewLocator',["./system","./viewEngine"],function(t,e){function n(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=i.getAttribute("data-view");if(r==e)return i}}function i(t){return(t+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")}return{useConvention:function(t,e,n){t=t||"viewmodels",e=e||"views",n=n||e;var r=new RegExp(i(t),"gi");this.convertModuleIdToViewId=function(t){return t.replace(r,e)},this.translateViewIdToArea=function(t,e){return e&&"partial"!=e?n+"/"+e+"/"+t:n+"/"+t}},locateViewForObject:function(e,n){var i;if(e.getView&&(i=e.getView()))return this.locateView(i,null,n);if(e.viewUrl)return this.locateView(e.viewUrl,null,n);var r=t.getModuleId(e);return r?this.locateView(this.convertModuleIdToViewId(r),null,n):this.locateView(this.determineFallbackViewId(e),null,n)},convertModuleIdToViewId:function(t){return t},determineFallbackViewId:function(t){var e=/function (.{1,})\(/,n=e.exec(t.constructor.toString()),i=n&&n.length>1?n[1]:"";return"views/"+i},translateViewIdToArea:function(t){return t},locateView:function(i,r,o){if("string"==typeof i){var a;if(a=e.isViewUrl(i)?e.convertViewUrlToViewId(i):i,r&&(a=this.translateViewIdToArea(a,r)),o){var s=n(o,a);if(s)return t.defer(function(t){t.resolve(s)}).promise()}return e.createView(a)}return t.defer(function(t){t.resolve(i)}).promise()}}});
define('durandal/viewModelBinder',["./system"],function(e){function t(t,o,a){if(!o||!t){if(n.throwOnErrors)throw new Error(i);return e.log(i,o,t),void 0}if(!o.getAttribute){if(n.throwOnErrors)throw new Error(r);return e.log(r,o,t),void 0}var s=o.getAttribute("data-view");try{e.log("Binding",s,t),n.beforeBind(t,o),a(),n.afterBind(t,o)}catch(u){if(n.throwOnErrors)throw new Error(u.message+";\nView: "+s+";\nModuleId: "+e.getModuleId(t));e.log(u.message,s,t)}}var n,i="Insufficient Information to Bind",r="Unexpected View Type";return n={beforeBind:e.noop,afterBind:e.noop,bindContext:function(e,n,i){i&&(e=e.createChildContext(i)),t(e,n,function(){i&&i.beforeBind&&i.beforeBind(n),ko.applyBindings(e,n),i&&i.afterBind&&i.afterBind(n)})},bind:function(e,n){t(e,n,function(){e.beforeBind&&e.beforeBind(n),ko.applyBindings(e,n),e.afterBind&&e.afterBind(n)})}}});
define('durandal/viewModel',["./system"],function(t){function e(t){return void 0==t&&(t={}),t.closeOnDeactivate||(t.closeOnDeactivate=s.defaults.closeOnDeactivate),t.beforeActivate||(t.beforeActivate=s.defaults.beforeActivate),t.afterDeactivate||(t.afterDeactivate=s.defaults.afterDeactivate),t.interpretResponse||(t.interpretResponse=s.defaults.interpretResponse),t.areSameItem||(t.areSameItem=s.defaults.areSameItem),t}function n(e,n,i,r,o){if(e&&e.deactivate){t.log("Deactivating",e);var a;try{a=e.deactivate(n)}catch(s){return t.log(s),r.resolve(!1),void 0}a&&a.then?a.then(function(){i.afterDeactivate(e,n,o),r.resolve(!0)},function(e){t.log(e),r.resolve(!1)}):(i.afterDeactivate(e,n,o),r.resolve(!0))}else e&&i.afterDeactivate(e,n,o),r.resolve(!0)}function i(e,n,i,r){if(e)if(e.activate){t.log("Activating",e);var o;try{o=e.activate(r)}catch(a){return t.log(a),i(!1),void 0}o&&o.then?o.then(function(){n(e),i(!0)},function(e){t.log(e),i(!1)}):(n(e),i(!0))}else n(e),i(!0);else i(!0)}function r(e,n,i){return t.defer(function(r){if(e&&e.canDeactivate){var o;try{o=e.canDeactivate(n)}catch(a){return t.log(a),r.resolve(!1),void 0}o.then?o.then(function(t){r.resolve(i.interpretResponse(t))},function(e){t.log(e),r.resolve(!1)}):r.resolve(i.interpretResponse(o))}else r.resolve(!0)}).promise()}function o(e,n,i,r){return t.defer(function(o){if(e==n())return o.resolve(!0),void 0;if(e&&e.canActivate){var a;try{a=e.canActivate(r)}catch(s){return t.log(s),o.resolve(!1),void 0}a.then?a.then(function(t){o.resolve(i.interpretResponse(t))},function(e){t.log(e),o.resolve(!1)}):o.resolve(i.interpretResponse(a))}else o.resolve(!0)}).promise()}function a(a,s){var u=ko.observable(null);s=e(s);var c=ko.computed({read:function(){return u()},write:function(t){c.viaSetter=!0,c.activateItem(t)}});return c.settings=s,s.activator=c,c.isActivating=ko.observable(!1),c.canDeactivateItem=function(t,e){return r(t,e,s)},c.deactivateItem=function(e,i){return t.defer(function(t){c.canDeactivateItem(e,i).then(function(r){r?n(e,i,s,t,u):(c.notifySubscribers(),t.resolve(!1))})}).promise()},c.canActivateItem=function(t,e){return o(t,u,s,e)},c.activateItem=function(e,r){var o=c.viaSetter;return c.viaSetter=!1,t.defer(function(a){if(c.isActivating())return a.resolve(!1),void 0;c.isActivating(!0);var l=u();return s.areSameItem(l,e,r)?(c.isActivating(!1),a.resolve(!0),void 0):(c.canDeactivateItem(l,s.closeOnDeactivate).then(function(f){f?c.canActivateItem(e,r).then(function(f){f?t.defer(function(t){n(l,s.closeOnDeactivate,s,t)}).promise().then(function(){e=s.beforeActivate(e,r),i(e,u,function(t){c.isActivating(!1),a.resolve(t)},r)}):(o&&c.notifySubscribers(),c.isActivating(!1),a.resolve(!1))}):(o&&c.notifySubscribers(),c.isActivating(!1),a.resolve(!1))}),void 0)}).promise()},c.canActivate=function(){var t;return a?(t=a,a=!1):t=c(),c.canActivateItem(t)},c.activate=function(){var t;return a?(t=a,a=!1):t=c(),c.activateItem(t)},c.canDeactivate=function(t){return c.canDeactivateItem(c(),t)},c.deactivate=function(t){return c.deactivateItem(c(),t)},c.includeIn=function(t){t.canActivate=function(){return c.canActivate()},t.activate=function(){return c.activate()},t.canDeactivate=function(t){return c.canDeactivate(t)},t.deactivate=function(t){return c.deactivate(t)}},s.includeIn?c.includeIn(s.includeIn):a&&c.activate(),c.forItems=function(e){s.closeOnDeactivate=!1,s.determineNextItemToActivate=function(t,e){var n=e-1;return-1==n&&t.length>1?t[1]:n>-1&&n<t.length-1?t[n]:null},s.beforeActivate=function(t){var n=c();if(t){var i=e.indexOf(t);-1==i?e.push(t):t=e()[i]}else t=s.determineNextItemToActivate(e,n?e.indexOf(n):0);return t},s.afterDeactivate=function(t,n){n&&e.remove(t)};var n=c.canDeactivate;c.canDeactivate=function(i){return i?t.defer(function(t){function n(){for(var e=0;e<o.length;e++)if(!o[e])return t.resolve(!1),void 0;t.resolve(!0)}for(var r=e(),o=[],a=0;a<r.length;a++)c.canDeactivateItem(r[a],i).then(function(t){o.push(t),o.length==r.length&&n()})}).promise():n()};var i=c.deactivate;return c.deactivate=function(n){return n?t.defer(function(t){function i(i){c.deactivateItem(i,n).then(function(){o++,e.remove(i),o==a&&t.resolve()})}for(var r=e(),o=0,a=r.length,s=0;a>s;s++)i(r[s])}).promise():i()},c},c}var s;return s={defaults:{closeOnDeactivate:!0,interpretResponse:function(t){if("string"==typeof t){var e=t.toLowerCase();return"yes"==e||"ok"==e}return t},areSameItem:function(t,e){return t==e},beforeActivate:function(t){return t},afterDeactivate:function(t,e,n){e&&n&&n(null)}},activator:a}});
define('durandal/composition',["./viewLocator","./viewModelBinder","./viewEngine","./system","./viewModel"],function(t,e,n,i,r){function o(t){return t.model&&t.model.activate&&(p.activateDuringComposition&&void 0==t.activate||t.activate)}function a(t,e){o(t)?r.activator().activateItem(t.model).then(function(t){t&&e()}):e()}function s(t){for(var e=[],n={childElements:e,activeView:null},i=ko.virtualElements.firstChild(t);i;)1==i.nodeType&&(e.push(i),i.getAttribute(f)&&(n.activeView=i)),i=ko.virtualElements.nextSibling(i);return n}function u(t,e,n){n.activeView&&n.activeView.removeAttribute(f),e&&(n.model&&n.model.viewAttached&&(n.composingNewView||n.alwaysAttachView)&&n.model.viewAttached(e),e.setAttribute(f,!0)),n.afterCompose&&n.afterCompose(t,e,n)}function l(t,e){if("string"==typeof e.transition){if(e.activeView){if(e.activeView==t)return!1;if(!t)return!0;if(e.skipTransitionOnSameViewId){var n=e.activeView.getAttribute("data-view"),i=t.getAttribute("data-view");return n!=i}}return!0}return!1}var c={},f="data-active-view",p={activateDuringComposition:!1,convertTransitionToModuleId:function(t){return"durandal/transitions/"+t},switchContent:function(t,e,n){if(n.transition=n.transition||this.defaultTransitionName,l(e,n)){var r=this.convertTransitionToModuleId(n.transition);i.acquire(r).then(function(i){n.transition=i,i(t,e,n).then(function(){u(t,e,n)})})}else e!=n.activeView&&(n.cacheViews&&n.activeView&&$(n.activeView).css("display","none"),e?n.cacheViews?n.composingNewView?(n.viewElements.push(e),ko.virtualElements.prepend(t,e)):$(e).css("display",""):(ko.virtualElements.emptyNode(t),ko.virtualElements.prepend(t,e)):n.cacheViews||ko.virtualElements.emptyNode(t)),u(t,e,n)},bindAndShow:function(t,i,r){r.composingNewView=r.cacheViews?-1==ko.utils.arrayIndexOf(r.viewElements,i):!0,a(r,function(){if(r.beforeBind&&r.beforeBind(t,i,r),r.preserveContext&&r.bindingContext)r.composingNewView&&e.bindContext(r.bindingContext,i,r.model);else if(i){var o=r.model||c,a=ko.dataFor(i);if(a!=o){if(!r.composingNewView)return $(i).remove(),n.createView(i.getAttribute("data-view")).then(function(e){p.bindAndShow(t,e,r)}),void 0;e.bind(o,i)}}p.switchContent(t,i,r)})},defaultStrategy:function(e){return t.locateViewForObject(e.model,e.viewElements)},getSettings:function(t){var e=ko.utils.unwrapObservable(t())||{};if("string"==typeof e)return e;var n=i.getModuleId(e);if(n)return{model:e};for(var r in e)e[r]=ko.utils.unwrapObservable(e[r]);return e},executeStrategy:function(t,e){e.strategy(e).then(function(n){p.bindAndShow(t,n,e)})},inject:function(e,n){return n.model?n.view?(t.locateView(n.view,n.area,n.viewElements).then(function(t){p.bindAndShow(e,t,n)}),void 0):((void 0===n.view||n.view)&&(n.strategy||(n.strategy=this.defaultStrategy),"string"==typeof n.strategy?i.acquire(n.strategy).then(function(t){n.strategy=t,p.executeStrategy(e,n)}):this.executeStrategy(e,n)),void 0):(this.bindAndShow(e,null,n),void 0)},compose:function(e,r,o){"string"==typeof r&&(r=n.isViewUrl(r)?{view:r}:{model:r});var a=i.getModuleId(r);a&&(r={model:r});var u=s(e);r.bindingContext=o,r.activeView=u.activeView,r.cacheViews&&!r.viewElements&&(r.viewElements=u.childElements),r.model?"string"==typeof r.model?i.acquire(r.model).then(function(module){r.model="function"==typeof module?new module(e,r):module,p.inject(e,r)}):p.inject(e,r):r.view?(r.area=r.area||"partial",r.preserveContext=!0,t.locateView(r.view,r.area,r.viewElements).then(function(t){p.bindAndShow(e,t,r)})):this.bindAndShow(e,null,r)}};return ko.bindingHandlers.compose={update:function(t,e,n,i,r){var o=p.getSettings(e);p.compose(t,o,r)}},ko.virtualElements.allowedBindings.compose=!0,p});
define('durandal/widget',["./system","./composition"],function(e,t){var n="data-part",i="["+n+"]",r={},o={},a=["model","view","kind"],s={getParts:function(t){var r={};e.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++){var a=t[o];if(a.getAttribute){var s=a.getAttribute(n);s&&(r[s]=a);for(var u=$(i,a),c=0;c<u.length;c++){var l=u.get(c);r[l.getAttribute(n)]=l}}}return r},getSettings:function(e){var t=ko.utils.unwrapObservable(e())||{};if("string"==typeof t)return t;for(var n in t)t[n]=-1!=ko.utils.arrayIndexOf(a,n)?ko.utils.unwrapObservable(t[n]):t[n];return t},registerKind:function(e){ko.bindingHandlers[e]={init:function(){return{controlsDescendantBindings:!0}},update:function(t,n,i,r,o){var a=s.getSettings(n);a.kind=e,s.create(t,a,o)}},ko.virtualElements.allowedBindings[e]=!0},mapKind:function(e,t,n){t&&(o[e]=t),n&&(r[e]=n)},convertKindToModuleId:function(e){return r[e]||"durandal/widgets/"+e+"/controller"},convertKindToViewId:function(e){return o[e]||"durandal/widgets/"+e+"/view"},beforeBind:function(e,t){var n=s.getParts(e),i=s.getParts(t);for(var r in n)$(i[r]).replaceWith(n[r])},createCompositionSettings:function(e){return e.model||(e.model=this.convertKindToModuleId(e.kind)),e.view||(e.view=this.convertKindToViewId(e.kind)),e.preserveContext=!0,e.beforeBind=this.beforeBind,e},create:function(e,n,i){"string"==typeof n&&(n={kind:n});var r=s.createCompositionSettings(n);t.compose(e,r,i)}};return ko.bindingHandlers.widget={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,i,r){var o=s.getSettings(t);s.create(e,o,r)}},ko.virtualElements.allowedBindings.widget=!0,s});
define('durandal/modalDialog',["./composition","./system","./viewModel"],function(t,e,n){function i(t){return e.defer(function(n){"string"==typeof t?e.acquire(t).then(function(module){"function"==typeof module?n.resolve(new module):n.resolve(module)}):n.resolve(t)}).promise()}var r={},o=0,a={currentZIndex:1050,getNextZIndex:function(){return++this.currentZIndex},isModalOpen:function(){return o>0},getContext:function(t){return r[t||"default"]},addContext:function(t,e){e.name=t,r[t]=e;var n="show"+t.substr(0,1).toUpperCase()+t.substr(1);this[n]=function(e,n){return this.show(e,n,t)}},createCompositionSettings:function(t,e){var n={model:t,activate:!1};return e.afterCompose&&(n.afterCompose=e.afterCompose),n},show:function(a,s,u){var l=this,c=r[u||"default"];return e.defer(function(e){i(a).then(function(i){var r=n.activator();r.activateItem(i,s).then(function(n){if(n){var a=i.modal={owner:i,context:c,activator:r,close:function(){var t=arguments;r.deactivateItem(i,!0).then(function(n){n&&(o--,c.removeHost(a),delete i.modal,e.resolve.apply(e,t))})}};a.settings=l.createCompositionSettings(i,c),c.addHost(a),o++,t.compose(a.host,a.settings)}else e.resolve(!1)})})}).promise()}};return a.addContext("default",{blockoutOpacity:.2,removeDelay:200,addHost:function(t){var e=$("body"),n=$('<div class="modalBlockout"></div>').css({"z-index":a.getNextZIndex(),opacity:this.blockoutOpacity}).appendTo(e),i=$('<div class="modalHost"></div>').css({"z-index":a.getNextZIndex()}).appendTo(e);if(t.host=i.get(0),t.blockout=n.get(0),!a.isModalOpen()){t.oldBodyMarginRight=$("body").css("margin-right");var r=$("html"),o=e.outerWidth(!0),s=r.scrollTop();$("html").css("overflow-y","hidden");var u=$("body").outerWidth(!0);e.css("margin-right",u-o+parseInt(t.oldBodyMarginRight)+"px"),r.scrollTop(s),$("#simplemodal-overlay").css("width",u+"px")}},removeHost:function(t){if($(t.host).css("opacity",0),$(t.blockout).css("opacity",0),setTimeout(function(){$(t.host).remove(),$(t.blockout).remove()},this.removeDelay),!a.isModalOpen()){var e=$("html"),n=e.scrollTop();e.css("overflow-y","").scrollTop(n),$("body").css("margin-right",t.oldBodyMarginRight)}},afterCompose:function(t,e,n){var i=$(e),r=i.width(),o=i.height();i.css({"margin-top":(-o/2).toString()+"px","margin-left":(-r/2).toString()+"px"}),$(n.model.modal.host).css("opacity",1),$(e).hasClass("autoclose")&&$(n.model.modal.blockout).click(function(){n.model.modal.close()}),$(".autofocus",e).each(function(){$(this).focus()})}}),a});
define('durandal/events',["./system"],function(t){var e=/\s+/,n=function(){},i=function(t,e){this.owner=t,this.events=e};return i.prototype.then=function(t,e){return this.callback=t||this.callback,this.context=e||this.context,this.callback?(this.owner.on(this.events,this.callback,this.context),this):this},i.prototype.on=i.prototype.then,i.prototype.off=function(){return this.owner.off(this.events,this.callback,this.context),this},n.prototype.on=function(t,n,r){var o,a,s;if(n){for(o=this.callbacks||(this.callbacks={}),t=t.split(e);a=t.shift();)s=o[a]||(o[a]=[]),s.push(n,r);return this}return new i(this,t)},n.prototype.off=function(n,i,r){var o,a,s,u;if(!(a=this.callbacks))return this;if(!(n||i||r))return delete this.callbacks,this;for(n=n?n.split(e):t.keys(a);o=n.shift();)if((s=a[o])&&(i||r))for(u=s.length-2;u>=0;u-=2)i&&s[u]!==i||r&&s[u+1]!==r||s.splice(u,2);else delete a[o];return this},n.prototype.trigger=function(t){var n,i,r,o,a,s,u,l;if(!(i=this.callbacks))return this;for(l=[],t=t.split(e),o=1,a=arguments.length;a>o;o++)l[o-1]=arguments[o];for(;n=t.shift();){if((u=i.all)&&(u=u.slice()),(r=i[n])&&(r=r.slice()),r)for(o=0,a=r.length;a>o;o+=2)r[o].apply(r[o+1]||this,l);if(u)for(s=[n].concat(l),o=0,a=u.length;a>o;o+=2)u[o].apply(u[o+1]||this,s)}return this},n.prototype.proxy=function(t){var e=this;return function(n){e.trigger(t,n)}},n.includeIn=function(t){t.on=n.prototype.on,t.off=n.prototype.off,t.trigger=n.prototype.trigger,t.proxy=n.prototype.proxy},n});
define('durandal/app',["./system","./viewEngine","./composition","./widget","./modalDialog","./events"],function(t,e,n,i,r,o){var a={title:"Application",showModal:function(t,e,n){return r.show(t,e,n)},showMessage:function(t,e,n){return r.show("./messageBox",{message:t,title:e||this.title,options:n})},start:function(){var e=this;return e.title&&(document.title=e.title),t.defer(function(e){$(function(){t.log("Starting Application"),e.resolve(),t.log("Started Application")})}).promise()},setRoot:function(t,i,r){var o,a={activate:!0,transition:i};o=r&&"string"!=typeof r?r:document.getElementById(r||"applicationHost"),"string"==typeof t?e.isViewUrl(t)?a.view=t:a.model=t:a.model=t,n.compose(o,a)},adaptToDevice:function(){document.ontouchmove=function(t){t.preventDefault()}}};return o.includeIn(a),a});
define('durandal/plugins/router',["../system","../viewModel","../app"],function(e,t,n){function i(t){E(!1),e.log("Redirecting"),v.navigateTo(t)}function r(){N=!0,e.log("Cancelling Navigation"),y&&m.setLocation(y),N=!1,E(!1);var t=m.last_location[1].split("#/")[1];y||!t?$():t!=x?window.location.replace("#/"+x):$()}function o(e,t,module){A(e),v.onNavigationComplete(e,t,module),b=module,y=m.last_location[1].replace("/",""),$()}function a(t,n,module){e.log("Activating Route",t,module,n),S.activateItem(module,n).then(function(e){e?o(t,n,module):r()})}function s(){return N||m.last_location[1].replace("/","")==y}function u(e,t,n){var o=v.guardRoute(e,t,n);o?o.then?o.then(function(o){o?"string"==typeof o?i(o):a(e,t,n):r()}):"string"==typeof o?i(o):a(e,t,n):r()}function c(){if(!E()){var t=D.shift();D=[],t&&(E(!0),e.acquire(t.routeInfo.moduleId).then(function(module){t.params.routeInfo=t.routeInfo,t.params.router=v;var e=v.getActivatableInstance(t.routeInfo,t.params,module);v.guardRoute?u(t.routeInfo,t.params,e):a(t.routeInfo,t.params,e)}))}}function l(e,t){D.unshift({routeInfo:e,params:t}),c()}function f(e,t){var n=k[e];if(!s()){if(!n){if(!v.autoConvertRouteToModuleId)return v.handleInvalidRoute(e,t),void 0;n={moduleId:v.autoConvertRouteToModuleId(e,t),name:v.convertRouteToName(e)}}l(n,t)}}function p(){f(x,this.params||{})}function d(){f(this.app.last_route.path.toString(),this.params||{})}function h(){var e,t=this.params||{};if(v.autoConvertRouteToModuleId){var n=this.path.split("#/");if(2==n.length){var i=n[1].split("/");return e=i[0],t.splat=i.splice(1),f(e,t),void 0}}v.handleInvalidRoute(this.app.last_location[1],t)}function g(e){return v.prepareRouteInfo(e),k[e.url.toString()]=e,C.push(e),e.visible&&(e.isActive=ko.computed(function(){return _()&&S()&&S().__moduleId__==e.moduleId}),T.push(e)),e}var m,v,y,b,x,w,k={},C=ko.observableArray([]),T=ko.observableArray([]),_=ko.observable(!1),E=ko.observable(!1),N=!1,S=t.activator(),A=ko.observable(),D=[],$=function(){$=e.noop,_(!0),v.dfd.resolve(),delete v.dfd};return S.settings.areSameItem=function(){return!1},v={ready:_,allRoutes:C,visibleRoutes:T,isNavigating:E,activeItem:S,activeRoute:A,afterCompose:function(){setTimeout(function(){E(!1),c()},10)},getActivatableInstance:function(e,t,module){return"function"==typeof module?new module:module},useConvention:function(e){e=null==e?"viewmodels":e,e&&(e+="/"),v.convertRouteToModuleId=function(t){return e+v.stripParameter(t)}},stripParameter:function(e){var t=e.indexOf(":"),n=t>0?t-1:e.length;return e.substring(0,n)},handleInvalidRoute:function(t,n){e.log("No Route Found",t,n)},onNavigationComplete:function(e){document.title=n.title?e.caption+" | "+n.title:e.caption},navigateBack:function(){window.history.back()},navigateTo:function(e,t){switch(t=t||"trigger",t.toLowerCase()){case"skip":w=e,m.setLocation(e);break;case"replace":window.location.replace(e);break;default:m.lookupRoute("get",e)?m.setLocation(e):window.location.href=e}},replaceLocation:function(e){this.navigateTo(e,"replace")},convertRouteToName:function(e){var t=v.stripParameter(e);return t.substring(0,1).toUpperCase()+t.substring(1)},convertRouteToModuleId:function(e){return v.stripParameter(e)},prepareRouteInfo:function(e){e.url instanceof RegExp||(e.name=e.name||v.convertRouteToName(e.url),e.moduleId=e.moduleId||v.convertRouteToModuleId(e.url),e.hash=e.hash||"#/"+e.url),e.caption=e.caption||e.name,e.settings=e.settings||{}},mapAuto:function(e){e=e||"viewmodels",e+="/",v.autoConvertRouteToModuleId=function(t){return e+v.stripParameter(t)}},mapNav:function(e,t,n){return"string"==typeof e?this.mapRoute(e,t,n,!0):(e.visible=!0,g(e))},mapRoute:function(e,t,n,i){return"string"==typeof e?g({url:e,moduleId:t,name:n,visible:i}):g(e)},map:function(t){if(!e.isArray(t))return g(t);for(var n=[],i=0;i<t.length;i++)n.push(g(t[i]));return n},activate:function(t){return e.defer(function(n){var i;v.dfd=n,x=t,m=Sammy(function(e){for(var t=C(),n=0;n<t.length;n++){var r=t[n];e.get(r.url,d),i=this.routes.get[n],k[i.path.toString()]=r}e.get("#/",p),e.get(/\#\/(.*)/,h)}),m._checkFormSubmission=function(){return!1},m.before(null,function(e){if(w){if(e.path==="/"+w)return w=null,!1;throw new Error("Expected to skip url '"+w+"', but found url '"+e.path+"'")}return!0}),m.log=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("Sammy"),e.log.apply(e,t)},m.run("#/")}).promise()}}});
define('durandal/messageBox',[],function(){var t=function(e,n,i){this.message=e,this.title=n||t.defaultTitle,this.options=i||t.defaultOptions};return t.prototype.selectOption=function(t){this.modal.close(t)},t.prototype.activate=function(e){e&&(this.message=e.message,this.title=e.title||t.defaultTitle,this.options=e.options||t.defaultOptions)},t.defaultTitle="Application",t.defaultOptions=["Ok"],t});
define('durandal/transitions/entrance',["../system"],function(e){var t=100,n=function(n,i,r){return e.defer(function(e){function o(){e.resolve()}function a(){r.keepScrollPosition||$(document).scrollTop(0)}function s(){a(),r.cacheViews?r.composingNewView&&ko.virtualElements.prepend(n,i):(ko.virtualElements.emptyNode(n),ko.virtualElements.prepend(n,i));var e={marginLeft:"20px",marginRight:"-20px",opacity:0,display:"block"},t={marginRight:0,marginLeft:0,opacity:1};$(i).css(e),$(i).animate(t,c,"swing",o)}if(i){var u=$(r.activeView),c=r.duration||500;u.length?u.fadeOut(t,s):s()}else a(),r.activeView?$(r.activeView).fadeOut(t,function(){r.cacheViews||ko.virtualElements.emptyNode(n),o()}):(r.cacheViews||ko.virtualElements.emptyNode(n),o())}).promise()};return n});
define('viewmodels/shell',["durandal/plugins/router","durandal/app"],function(e,t){return{router:e,search:function(){t.showMessage("Search not yet implemented...")},activate:function(){return e.activate("welcome")}}});
define('viewmodels/welcome',[],function(){var e=function(){this.displayName="Welcome to the Durandal Starter Kit!",this.description="Durandal is a cross-device, cross-platform client framework written in JavaScript and designed to make Single Page Applications (SPAs) easy to create and maintain.",this.features=["Clean MV* Architecture","JS & HTML Modularity","Simple App Lifecycle","Eventing, Modals, Message Boxes, etc.","Navigation & Screen State Management","Consistent Async Programming w/ Promises","App Bundling and Optimization","Use any Backend Technology","Built on top of jQuery, Knockout & RequireJS","Integrates with other libraries such as SammyJS & Bootstrap","Make jQuery & Bootstrap widgets templatable and bindable (or build your own widgets)."]};return e.prototype.viewAttached=function(){},e});
define('durandal/http',[],function(){return{defaultJSONPCallbackParam:"callback",get:function(t,e){return $.ajax(t,{data:e})},jsonp:function(t,e,n){return-1==t.indexOf("=?")&&(n=n||this.defaultJSONPCallbackParam,t+=-1==t.indexOf("?")?"?":"&",t+=n+"=?"),$.ajax({url:t,dataType:"jsonp",data:e})},post:function(t,e){return $.ajax({url:t,data:ko.toJSON(e),type:"POST",contentType:"application/json",dataType:"json"})}}});
define('viewmodels/flickr',["durandal/http","durandal/app"],function(e,t){return{displayName:"Flickr",images:ko.observableArray([]),activate:function(){if(!(this.images().length>0)){var t=this;return e.jsonp("http://api.flickr.com/services/feeds/photos_public.gne",{tags:"mount ranier",tagmode:"any",format:"json"},"jsoncallback").then(function(e){t.images(e.items)})}},select:function(e){e.viewUrl="views/detail",t.showModal(e)},canDeactivate:function(){return t.showMessage("Are you sure you want to leave this page?","Navigate",["Yes","No"])}}});
require.config({paths:{text:"durandal/amd/text"}}),define('main',['require','durandal/app','durandal/viewLocator','durandal/system','durandal/plugins/router','durandal/messageBox','durandal/transitions/entrance','viewmodels/shell','viewmodels/welcome','viewmodels/flickr'],function(require){var e=require("durandal/app"),a=require("durandal/viewLocator"),n=require("durandal/system"),t=require("durandal/plugins/router");require("durandal/messageBox"),require("durandal/transitions/entrance"),require("viewmodels/shell"),require("viewmodels/welcome"),require("viewmodels/flickr"),n.debug(!0),e.title="Durandal Starter Kit",e.start().then(function(){a.useConvention(),t.useConvention(),t.mapNav("welcome"),t.mapNav("flickr"),e.adaptToDevice(),e.setRoot("viewmodels/shell","entrance")})});
define('text',{load: function(id){throw new Error("Dynamic load not allowed: " + id);}});
define('text!durandal/messageBox.html',[],function () { return '<div class="messageBox">\r\n    <div class="modal-header">\r\n        <h3 data-bind="html: title"></h3>\r\n    </div>\r\n    <div class="modal-body">\r\n        <p class="message" data-bind="html: message"></p>\r\n    </div>\r\n    <div class="modal-footer" data-bind="foreach: options">\r\n        <button class="btn" data-bind="click: function () { $parent.selectOption($data); }, html: $data, css: { \'btn-primary\': $index() == 0, autofocus: $index() == 0 }"></button>\r\n    </div>\r\n</div>';});

define('text!views/detail.html',[],function () { return '<div class="messageBox autoclose" style="max-width: 425px">\r\n    <div class="modal-header">\r\n        <h3>Details</h3>\r\n    </div>\r\n    <div class="modal-body">\r\n        <p data-bind="html: description"></p>\r\n    </div>\r\n</div>';});

define('text!views/flickr.html',[],function () { return '<section>\r\n    <h2 data-bind="html: displayName"></h2>\r\n    <div class="row-fluid">\r\n        <ul class="thumbnails" data-bind="foreach: images">\r\n            <li>\r\n                <a href="#" class="thumbnail" data-bind="click:$parent.select">\r\n                    <img style="width: 260px; height: 180px;" data-bind="attr: { src: media.m }"/>\r\n                </a>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</section>';});

define('text!views/shell.html',[],function () { return '<div>\r\n    <div class="navbar navbar-fixed-top">\r\n        <div class="navbar-inner">\r\n            <a class="brand" data-bind="attr: { href: router.visibleRoutes()[0].hash }">\r\n                <i class="icon-home"></i>\r\n                <span>Durandal</span>\r\n            </a>\r\n            <ul class="nav" data-bind="foreach: router.visibleRoutes">\r\n                <li data-bind="css: { active: isActive }">\r\n                    <a data-bind="attr: { href: hash }, html: name"></a>\r\n                </li>\r\n            </ul>\r\n            <div class="loader pull-right" data-bind="css: { active: router.isNavigating }">\r\n                <i class="icon-spinner icon-2x icon-spin"></i>\r\n            </div>\r\n            <form class="navbar-search pull-right" data-bind="submit:search">\r\n                <input type="text" class="search-query" placeholder="Search">\r\n            </form>\r\n        </div>\r\n    </div>\r\n    \r\n    <div class="container-fluid page-host">\r\n        <!--ko compose: { \r\n            model: router.activeItem, //wiring the router\r\n            afterCompose: router.afterCompose, //wiring the router\r\n            transition:\'entrance\', //use the \'entrance\' transition when switching views\r\n            cacheViews:true //telling composition to keep views in the dom, and reuse them (only a good idea with singleton view models)\r\n        }--><!--/ko-->\r\n    </div>\r\n</div>';});

define('text!views/welcome.html',[],function () { return '<section>\r\n    <h2 data-bind="html:displayName"></h2>\r\n    <blockquote data-bind="html:description"></blockquote>\r\n    <h3>Features</h3>\r\n    <ul data-bind="foreach: features">\r\n        <li data-bind="html: $data"></li>\r\n    </ul>\r\n    <div class="alert alert-success">\r\n      <h4>Read Me Please</h4>\r\n        For information about this template and for general documenation please visit <a href="http://www.durandaljs.com">the official site</a> and if you can\'t find \r\n        answers to your questions there, we hope you will join our <a href="https://groups.google.com/forum/?fromgroups#!forum/durandaljs">google group</a>.\r\n    </div>\r\n</section>';});

require(["main"]);
}());